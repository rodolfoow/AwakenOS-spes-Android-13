name: AwakenOS Build
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Build on Crave
        run: |
          # Crave skriptini yuklash
          curl -s https://raw.githubusercontent.com/accupara/crave/master/get_crave.sh | bash
          
          # Ishga tushirish huquqi
          chmod +x crave
          
          # Build-ni majburiy boshlash (Zero-conf muammosini chetlab o'tamiz)
          ./crave run --no-patch -- "bash build.sh"
        env:
          CRAVE_USERNAME: ${{ secrets.CRAVE_USERNAME }}
          CRAVE_TOKEN: ${{ secrets.CRAVE_TOKEN }}
          
